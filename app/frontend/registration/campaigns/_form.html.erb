<%= form_with(model: [lecture, campaign].compact,
              url: campaign.persisted? ? registration_campaign_path(campaign) : lecture_registration_campaigns_path(lecture),
              local: true) do |f| %>

  <% if campaign.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= t("basics.error", default: "Error") %></h4>
      <ul>
        <% campaign.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-3">
    <%= f.label :title, t("registration.campaign.form.title"), class: "form-label" %>
    <%= f.text_field :title, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label :allocation_mode, t("registration.campaign.form.allocation_mode"), class: "form-label" %>
    <%= f.select :allocation_mode,
                 Registration::Campaign.allocation_modes.keys.map { |k| [k.humanize, k] },
                 {}, class: "form-select" %>
  </div>

  <div class="mb-3">
    <%= f.label :registration_deadline, t("registration.campaign.form.registration_deadline"), class: "form-label" %>
    <%= f.datetime_field :registration_deadline, class: "form-control" %>
  </div>

  <div class="mb-3 form-check">
    <%= f.check_box :planning_only, class: "form-check-input" %>
    <%= f.label :planning_only, t("registration.campaign.form.planning_only"), class: "form-check-label" %>
  </div>

  <%= f.submit t("registration.campaign.form.submit"), class: "btn btn-primary" %>
  <%= link_to t("buttons.cancel"),
              campaign.persisted? ? registration_campaign_path(campaign) : lecture_registration_campaigns_path(lecture),
              class: "btn btn-secondary",
              data: { turbo_stream: true } %>
<% end %>
