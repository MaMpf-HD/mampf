<div class="col align-items-center m-3">
  <% items_selected = item_preferences.map{|i| i.item.id} %>
              <div data-controller="registration-item-search">
                <div class="mb-3">
                <%= render partial: "registration/item_search_form/search_form",
                           locals: {
                             controller: "registration-item-search",
                             placeholder: t("registration.filter_placeholder")
                           } %>
                </div>
                <div class="table-responsive">
                  <table class="table table-sm align-middle mb-2">
                    <thead class="bg-grey-lighten-5 text-dark small">
                      <tr>
                        <% Registration::UserRegistrationsHelper::TABLE_CONFIG[campaign.registerable_type].each do |col| %>
                          <th class="fw-semibold <%= col[:cell_class] %>"><%= col[:header] %></th>
                        <% end %>

                        <th class="fw-semibold text-center"><%= t("basics.seats") %></th>
                        <th class="text-end fw-semibold pe-2"><%= t("basics.action") %></th>
                      </tr>
                    </thead>

                    <tbody>
                      <% items.each do |item| %>
                        <tr data-registration-item-search-target="row">

                          <% Registration::UserRegistrationsHelper::TABLE_CONFIG[campaign.registerable_type].each do |col| %>
                            <td class="<%= col[:cell_class] %>">
                              <%= col[:field].call(item) %>
                            </td>
                          <% end %>

                          <td class="text-center small fw-semibold text-dark">
                            <%= "#{nullable_capacity_display(item.capacity)}" %>
                          </td>

                          <td class="d-flex justify-content-end py-2">
                            <button type="submit"
                                    class="material-icons clickable playlist_add w-auto 
                                    border-0 bg-transparent p-0 m-0"
                                    data-action="touched-check#mark"
                                    data-bs-toggle="tooltip"
                                    <%= "disabled" if items_selected.include?(item.id) || !campaign.open_for_registrations?%>
                                    title="<%= t('buttons.add_to_list') %>"
                                    formaction="<%= add_preference_path(item.id) %>">
                              playlist_add
                            </button>
                            
                          </td>

                        </tr>
                      <% end %>
                    </tbody>
                  </table>
                </div>

              </div>

              <span class="text-muted small" id="catalogCount">
                <%= t('basics.item_count', count: items.count )%>
              </span>

            </div>