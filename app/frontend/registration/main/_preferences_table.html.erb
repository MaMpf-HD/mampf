<%= turbo_frame_tag "preferences_table" do %>
  <input type="hidden"
         name="preferences_json"
         id="preferences-json"
         value="<%= item_preferences.to_json %>">

<table class="table table-sm align-middle mb-2">
  <thead class="bg-grey-lighten-5 text-dark small">
    <tr>
      <!-- attribute data columns -->
      <% Registration::UserRegistrationsHelper::TABLE_CONFIG[campaign.registerable_type].each do |col| %>
      <th class="fw-semibold"><%= col[:header] %></th>
      <% end %>
      <!-- action columns -->
      <th class="text-end fw-semibold pe-2"><%= t("basics.action") %></th>
    </tr>
  </thead>
  <tbody>
    <% item_preferences.each do |pref| %>
    <% item = pref.item %>
    <tr data-registration-item-search-target="row">
      <!-- attribute data columns -->
      <% Registration::UserRegistrationsHelper::TABLE_CONFIG[campaign.registerable_type].each do |col| %>
      <td class="<%= col[:cell_class] %>"><%= col[:field].call(item) %></td>
      <% end %>
      <!-- seats column -->
      <td class="text-center small fw-semibold text-dark">
        <%= "#{item.item_capacity_used} / #{nullable_capacity_display(item.capacity)}" %>
      </td>
      <!-- action column -->
      <td>
        <button type="submit"
        formaction="<%= move_preference_up_path(item.id) %>">
  Up
</button>
<button type="submit"
        formaction="<%= move_preference_down_path(item.id) %>">
  Down
</button>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
<% end %>