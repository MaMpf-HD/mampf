<li class="list-group-item bg-mdb-color-lighten-5">
  <div class="row">
    <div class="col-6 w-100 d-flex justify-content-between align-items-center">
      <span class="text-dark me-2">
        <strong>
          <%= link_to section.to_label,
                      section_path(section),
                      class: 'text-dark' %>
        </strong>
      </span>
      <span class="flex-shrink-0">
        <% is_completed = section.completions.exists?(user: current_user) %>

        <%= button_to toggle_completion_section_path(section), 
              method: :post, 
              class: "btn btn-sm flex-shrink-0 #{is_completed ? 'btn-success' : 'btn-outline-secondary'}" do %>
          <% if is_completed %>
            <i class="fas fa-check-circle"></i> Completed
          <% else %>
            <i class="far fa-circle"></i> Mark Done
          <% end %>
        <% end %>
      </span>
    </div>
    <div class="col-6">
      <%= render partial: 'lectures/show/lesson',
                 collection: section.lessons.includes(:tags),
                 cached: true %>
    </div>
    <% unless section.details.blank? %>
      <div class="col-12 mt-2">
        <%= section.details.html_safe %>
      </div>
    <% end %>
    <div class="col-12 mt-2">
      <%= render partial: 'lectures/show/tag',
                 collection: section.tags,
                 cached: true %>
    </div>
  </div>
</li>
