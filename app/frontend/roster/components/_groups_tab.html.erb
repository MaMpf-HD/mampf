<div class="card border-top-0">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th><%= t('roster.columns.title') %></th>
          <% if group_type == :tutorials %>
            <th><%= t('roster.columns.tutors') %></th>
          <% elsif group_type == :talks %>
            <th><%= t('roster.columns.speakers') %></th>
          <% end %>
          <th><%= t('roster.columns.capacity') %></th>
          <th><%= t('roster.columns.occupancy') %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% groups.each do |group| %>
          <% group[:items].each do |item| %>
            <tr>
              <td class="fw-medium"><%= item.title %></td>
              <% if group_type == :tutorials %>
                <td><%= item.tutors.map(&:name).join(", ") %></td>
              <% elsif group_type == :talks %>
                <td><%= item.speakers.map(&:name).join(", ") %></td>
              <% end %>
              <td><%= item.capacity %></td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="progress flex-grow-1 me-2" style="height: 6px;">
                    <% percentage = item.capacity ? (item.roster_entries.count.to_f / item.capacity * 100).clamp(0, 100) : 0 %>
                    <div class="progress-bar <%= percentage >= 100 ? 'bg-danger' : 'bg-primary' %>"
                          role="progressbar"
                          style="width: <%= percentage %>%"></div>
                  </div>
                  <span class="small text-muted"><%= item.roster_entries.count %></span>
                </div>
              </td>
              <td class="text-end">
                <%= link_to t('roster.manage'),
                            component.group_path(item),
                            class: "btn btn-sm btn-outline-primary" %>
              </td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
  <% if total_participants.zero? %>
    <div class="card-footer text-muted small text-center py-3">
      <i class="bi bi-info-circle me-1"></i> <%= t('roster.empty_hint') %>
    </div>
  <% end %>
</div>
