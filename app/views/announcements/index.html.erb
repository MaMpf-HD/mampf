<div class="container" id="admin-news">

  <%# News popups %>
  <div class="row mt-3 p-2">
    <div class="col-12">
      <h4>
          News Popups
      </h4>
    </div>
  </div>

  <div class="row p-2">
    <div class="col-12">
      <table class="table table-striped bg-white
          border border-primary-subtle shadow-sm">
        <thead>
          <tr>
            <th scope="col">Created at</th>
            <th scope="col">Updated at</th>
            <th scope="col">Name</th>
            <th scope="col"></th>
            <th scope="col">Active</th>
          </tr>
        </thead>
        <tbody>
          <% @news_popups.each do |popup| %>
            <tr>
              <td><%= popup.created_at %></td>
              <td><%= popup.updated_at %></td>
              <td>
                <input class="form-control" value="<%= popup.name %>">
              </td>
              <td>
                <%= link_to 'Test',
                  '/news_popups/' + popup.name + '.html',
                  target: :_blank,
                  role: 'button',
                  class: 'btn btn-primary' %>
              </td>
              <td class="align-middle">
                <div class="form-check form-switch">
                  <% is_checked = popup.active ? 'checked' : '' %>
                  <input class="form-check-input" type="checkbox"
                    role="switch" <%= is_checked %>>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <%# News %>
  <div class="row mt-3 p-2">
    <div class="col-7">
      <h4>
        <%= t('basics.news') %>
      </h4>
    </div>
    <div class="col-3">
      <%= paginate @announcements, window: 2 %>
    </div>
    <div class="col-2 text-end">
      <%= link_to t('buttons.create_announcement'),
                  new_announcement_path,
                  class: 'btn btn-sm btn-secondary',
                  remote: true %>
    </div>
  </div>
  <div class="row bg-mdb-color-lighten-2 mx-2 px-4 py-3">
    <div class="col-2 text-light">
      <strong>
        <%= t('basics.date') %>
      </strong>
    </div>
    <div class="col-2 text-light">
      <strong>
        <%= t('basics.author') %>
      </strong>
    </div>
    <div class="col-5 text-light">
      <strong>
        <%= t('basics.text') %>
      </strong>
    </div>
    <div class="col-1 text-light">
      <strong>
        <%= t('admin.announcement.main_page') %>
      </strong>
    </div>
    <div class="col-2 text-light">
      <strong>
        <%= t('basics.action') %>
      </strong>
    </div>
  </div>
  <div id="row-new-announcement"
      class="border-bottom mx-2 py-2"
      style="display: none;">
  </div>
  <% @announcements.each do |a| %>
    <div class="row border-bottom mx-2 px-4 py-2 bg-white"
        id="row-announcement-<%= a.id %>">
      <%= render partial: 'announcements/row',
                locals: { announcement: a } %>
    </div>
  <% end %>
  <%= render partial: 'announcements/modal' %>
</div>
