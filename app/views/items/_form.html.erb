<div class="action-box">
  <%= form_with model: item do |f|%>
    <div class="form-group form-row">
      <div class="col-2 col-form-label">
        Startzeit
      </div>
      <div class="col-auto">
        <%= f.text_field :start_time,
                         { value: item.start_time.simple_vtt_string, size: 12,
                           maxlength: 12, class: 'form-control' } %>
        <div class="invalid-feedback" id="start-time-error">
        </div>
      </div>
      <div class="col-1 col-form-label">
        <i class="material-icons clickable timer" data-toggle="tooltip"
           data-placement="right" title="Zeit aus Video übernehmen"
           data-timer="item_start_time">
          timer
        </i>
      </div>
    </div>
    <div class="form-group form-row">
      <div class="col-2 col-form-label">
        <%= f.label :sort, 'Typ' %>
      </div>
      <div class="col-auto">
        <%= f.select :sort, Item.internal_sorts, {},
                     { class: 'form-control' } %>
      </div>
    </div>
    <div id="item_section_select" class="form-group form-row">
      <div class="col-2 col-form-label">
        <%= f.label :section_id, 'Abschnitt' %>
      </div>
      <div class="col-7">
        <%= f.select :section_id,
                      [['kein zugeordneter Abschnitt aus der Datenbank', '']] +
                      Section.list, {}, { class: 'selectize'} %>
      </div>
      <div class="col-3">
        <button type="button" class="btn btn-outline-secondary"
                data-toggle="modal" data-target="#sectionModal"
                id="create-section-button">
          Abschnitt anlegen
        </button>
      </div>
    </div>
    <div id="item_number_field" class="form-group form-row">
      <div class="col-2 col-form-label">
        <%= f.label :number, 'Nummer' %>
      </div>
      <div class="col-auto">
        <%= f.number_field :number, { in: 0...999, class: 'form-control' } %>
      </div>
    </div>
    <div id="item_description_field" class="form-group form-row">
      <div class="col-2 col-form-label">
        <%= f.label :description, 'Beschreibung' %>
      </div>
      <div class="col-auto">
        <%= f.text_field :description, { size: 50, class: 'form-control' } %>
      </div>
    </div>
    <% if item.manuscript? %>
      <div id="item_page_field" class="form-group form-row">
        <div class="col-2 col-form-label">
          <%= f.label :page, 'Seite im pdf' %>
        </div>
        <div class="col-auto">
          <%= f.number_field :page,
                             { in: 1...item.medium.manuscript_pages + 1,
                               class: 'form-control' } %>
        </div>
        <div class="col-2">
          <%= link_to 'pdf', item.medium.manuscript[:original].url(host: host),
                      class: 'btn btn-outline-info', target: :blank %>
        </div>
      </div>
    <% end %>
    <div>
      <%= f.hidden_field :medium_id, value: item.medium.id %>
      <%= f.submit 'Speichern', class: 'btn btn-primary' %>
      <button id="cancel-item" class="btn btn-secondary ml-3" type="button">
        Abbrechen
      </button>
      <% if item.id.present? %>
      <%= link_to 'Löschen', item_path(item), method: :delete, remote: true,
                  data: { confirm: 'Bist Du sicher?' }, id: 'delete-item',
                  class: 'btn btn-danger' %>
      <% end %>
    </div>
  <% end %>
</div>
<div class="modal fade" id="sectionModal" tabindex="-1" role="dialog"
     aria-labelledby="sectionModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sectionModalLabel">
          Abschnitt anlegen
        </h5>
        <button type="button" class="close"
                data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
            &times;
          </span>
        </button>
      </div>
      <div class="modal-body" id="sectionModal-body">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Schließen
        </button>
      </div>
    </div>
  </div>
</div>
