<%= form_with model: @annotation do |f| %>
  <b>Time:</b> &nbsp <%= @timestamp %>

  <br><br>

  <!-- HIDDEN FIELDS -->
  <%= f.hidden_field :medium_id, value: @medium_id %>
  <%= f.hidden_field :timestamp, value: @timestamp %>
  <div hidden>
    <div id="annotation_id">
      <%= @annotation.id %>
    </div>
  </div>

  <!-- COMMENT TEXT AREA -->
  <b>Comment:</b>
  <%= f.text_area :comment, class: 'form-control' %>

  <br><br>

  <!-- COLOR SELECTION -->
  <b>Color:</b>
  <div id="color-picker">
    <input type="radio" name="color" id="red" value="red" />
    <label for="red"><span class="red"></span></label>

    <input type="radio" name="color" id="green" />
    <label for="green"><span class="green"></span></label>

    <input type="radio" name="color" id="yellow" />
    <label for="yellow"><span class="yellow"></span></label>

    <input type="radio" name="color" id="olive" />
    <label for="olive"><span class="olive"></span></label>

    <input type="radio" name="color" id="orange" />
    <label for="orange"><span class="orange"></span></label>

    <input type="radio" name="color" id="teal" />
    <label for="teal"><span class="teal"></span></label>

    <input type="radio" name="color" id="blue" />
    <label for="blue"><span class="blue"></span></label>

    <input type="radio" name="color" id="violet" />
    <label for="violet"><span class="violet"></span></label>

    <input type="radio" name="color" id="purple" />
    <label for="purple"><span class="purple"></span></label>

    <input type="radio" name="color" id="pink" />
    <label for="pink"><span class="pink"></span></label>
  </div>
  <!--<div class="btn-group" data-toggle="buttons">
    <% for i in 1..13 do %>
      <% color = color(i) %>
        <%= f.radio_button :color,
                           color,
                           class: 'custom-control-input' %>
        <%= f.label :color,
                    i,
                    value: color,
                    class: 'btn btn-primary' %>
    <% end %>
  </div>-->
  <!-- <b>Color: &nbsp</b>
  <%= f.color_field :color %> -->

  <br><br>

  <!-- CATEGORY SELECT LIST -->
  <b>Category: &nbsp</b>
  <%= f.select :category_text,
    ['Need help!', 'Found a mistake', 'Give a comment', 'Note',
     'Other'],
    { selected: @category_text },
    { class: 'form-control' } %>

  <br><br>

  <!-- VISIBLE FOR TEACHER? - CHECKBOX -->
  <% annotations_status = Medium.find_by(id: @medium_id).get_annotations_status %>
  <% if annotations_status == 1 %>
    <%= f.label :visible_for_teacher, class: "checkbox inline" do %>
      <span><b>Visible for teacher? &nbsp</b></span>
      <%= f.check_box :visible_for_teacher %>
    <% end %>
  <% elsif annotations_status == -1 %>
    <%= f.hidden_field :visible_for_teacher, value: false %>
  <% end %>

  <br>

  <!-- BUTTONS -->
  <% if @annotation.id == nil %>
  <%    button_text = "Create Annotation" %>
  <% else %>
  <%    button_text = "Save Changes" %>
  <% end %>

  <div class="modal-footer">
    <%= f.submit button_text, class: "btn btn-primary", id: "submit-button" %>
    <% if @annotation.id != nil %>
      <button type="button"
              id="delete-button"
              class="btn btn-secondary"
              data-dismiss="modal">
      Delete Annotation
    <% end %>
    <button type="button"
            class="btn btn-secondary"
            data-dismiss="modal">
    <%= t('buttons.cancel') %>
  </div>
<% end %>
