<%= form.fields_for :question do |question_form| %>

    <!-- Question Type Selection -->
    <div class="form-floating">
        <%= question_form.select :type,
            options_for_select([
                ["No Question", "vignettes-edit-no-question"],
                ["Text Area", 'vignettes-edit-text-question'],
                ["Multiple Choice", "vignettes-edit-multiple-choice"],
                ["Likert Scale", "vignettes-edit-likert"]
            ], question_form.object.type),
            {},
            {
                class: "form-select",
                id: "vignettes-question-type-select",
                "aria-label": "Selection for question type"
            } %>
        <%= question_form.label :type, "Question Type" %>
    </div>

    <div id="question-text" class="form-floating mt-3">
        <%= question_form.text_area :question_text,
            placeholder: '_',
            class: 'form-control',
            style: 'height: 120px',
            required: true
        %>
        <%= question_form.label :question_text, "Your question" %>
    </div>

    <div id="vignettes-edit-text-question" class="vignette-question-field collapse">
    </div>

    <div id="vignettes-edit-likert collapse" class="vignette-question-field">
    </div>

    <div id="vignettes-edit-multiple-choice" class="vignette-question-field collapse">
        <div>
        <%= question_form.label :options, "Options" %>
        <div id="vignette-options-container">
            <% question_form.object.options.each do |option| %>
            <div class="option-block">
                <%= question_form.fields_for :options, option do |option_form| %>
                <div class="option-field">
                    <%= option_form.text_field :text, placeholder: "Option Text" %>
                    <%= option_form.hidden_field :_destroy %>
                    <button type="button" class="remove-option">Remove</button>
                </div>
                <% end %>
            </div>
            <% end %>
            <div id="new-option-template" style="display: none;">
            <%= question_form.fields_for :options, question_form.object.options.build, child_index: "NEW_RECORD" do |option_form|%>
                <div class="option-field">
                <%= option_form.text_field :text %>
                <%= option_form.hidden_field :_destroy %>
                <button type="button" class="remove-option">Remove</button>
                </div>
            <% end %>
            </div>
        </div>
        <button type="button" id="add-option">Add Option</button>
        </div>
    </div>

<% end %>
