<div id="current-slide-container" data-slide-id="<%= @slide.id %>" data-questionnaire-id="<%= @questionnaire.id %>" >

    <h2> Slide <%= @slide.position %> </h2>
    <%= @slide.content %>
    <%= @slide.question.question_text %>

    <br>

    <%= form_with(model: @answer, id: "answer_form", url: submit_answer_vignettes_questionnaire_url(@questionnaire), local: true) do |form| %>


        <%= form.hidden_field :slide_id, value: @slide.id %>

        <%= form.fields_for :slide_statistic do |stat_form| %>
            <%= stat_form.hidden_field :user_id, value: current_user.id %>
            <%= stat_form.hidden_field :time_on_slide, id: "time-on-slide-field" %>
            <%= stat_form.hidden_field :time_on_info_slide, id: "time-on-info-slide-field" %>
        <% end %>

        <% case @slide.question.type %> 
            <% when "Vignettes::TextQuestion" %>
                <%= form.label :text, "Your Answer" %>
                <%= form.text_area :text %>
            <% when "Vignettes::MultipleChoiceQuestion" %>
                <% @slide.question.options.each do |option| %>
                    <%= option.text %>
                    <%= check_box_tag "vignettes_answer[option_ids][]", option.id, @answer.option_ids.include?(option.id) %>
                <% end %>
            <% when "Vignettes::LikertScaleQuestion" %>
                <% Vignettes::LikertScaleQuestion::LIKERT_LABELS.each do |value, label| %>
                <div>
                    <%= form.radio_button :likert_scale_value, value %>
                    <%= form.label :likert_scale_value, label %>
                </div>
                <% end %>
        <% end %>
        <br>
        <%= form.submit "Submit Answer!", class: "btn btn-primary" %>
    <% end %>
</div>
