<div class="card-header">
  <div class="row">
    <div class="col-12">
      <h5>
        Basisdaten
      </h5>
    </div>
  </div>
</div>
<div class="card-body p-2">
  <div class="form-group">
    <%= f.label :title, 'Titel' %>
    <%= f.text_field :title, { class: 'form-control',
                               data: { id: tag.id.to_i },
                               id: 'tag_title_' + tag.id.to_i.to_s } %>
    <div class="invalid-feedback" id="tag-title-error-<%= tag.id.to_i %>">
    </div>
  </div>
  <div class="form-group">
    <%= f.label :related_tag_ids, 'VerknÃ¼pfte Tags' %>
    <%= f.select :related_tag_ids,
                 options_for_select(Tag.where.not(id: tag.id)
                                       .map { |t| [t.title, t.id]},
                                    tag.related_tag_ids),
                 {}, { multiple: true,
                       class: 'selectize',
                       data: { id: tag.id.to_i } } %>
    <% unless new_tag %>
      <button type="button" class="btn btn-sm btn-outline-secondary"
              id="new-tag-button" data-tag="<%= tag.id %>" data-from="tag">
        Tag anlegen
      </button>
    <% end %>
    <div class="invalid-feedback"
         id="tag-related-tags-error-<%= tag.id.to_i %>">
    </div>
  </div>
  <div class="form-group">
    <%= f.label :course_ids, 'Module' %>
    <%= f.select :course_ids,
                 options_for_select(Course.all.map { |t| [t.title, t.id ]},
                                    tag.course_ids),
                 {}, { multiple: true,
                       class: 'selectize',
                       data: { id: tag.id.to_i } } %>
    <div class="invalid-feedback" id="tag-courses-error-<%= tag.id.to_i %>">
    </div>
  </div>
  <div class="form-group">
    <%= f.label :additional_lecture_ids, 'ZusÃ¤tzliche Vorlesungen' %>
    <%= f.select :additional_lecture_ids,
                 options_for_select(Lecture.all.map{ |l| [l.title, l.id ]},
                                    tag.additional_lecture_ids),
                 {}, { multiple: true,
                       class: 'selectize',
                       data: { id: tag.id.to_i } } %>
    <div class="invalid-feedback"
         id="tag-additional-lectures-error-<%= tag.id.to_i %>">
    </div>
  </div>
  <div class="form-group">
    <%= f.label :disabled_lecture_ids, 'Deaktivierte Vorlesungen' %>
    <%= f.select :disabled_lecture_ids,
                 options_for_select(Lecture.all.map{ |l| [l.title, l.id ]},
                                    tag.disabled_lecture_ids),
                 {}, { multiple: true,
                       class: 'selectize',
                       data: { id: tag.id.to_i } } %>
    <div class="invalid-feedback"
         id="tag-disabled-lectures-error-<%= tag.id.to_i %>">
    </div>
  </div>
  <% if from == 'section' %>
    <%= f.hidden_field :section_id, value: @tag.section_ids.first %>
  <% end %>
</div>
