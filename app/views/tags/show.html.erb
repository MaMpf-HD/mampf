<div class="row">
  <div class="col-10">
    <h2>
      <span class="badge badge-secondary mr-3">
        <%= t('tag') %>
      </span>
      <%= @tag.title %>
    </h2>
  </div>
  <div class="col-2 text-right">
    <% if current_user.editor? %>
      <a href="<%= edit_tag_path(@tag) %>"
         class="far fa-edit fa-lg text-secondary"
         data-toggle="tooltip"
         data-placement="bottom"
         title="Bearbeiten"
         style="text-decoration: none;">
      </a>
    <% end %>
  </div>
</div>
<div class="row mt-2 mb-2">
  <div class="col-12 col-lg-4 col-xl-3 col-xxl-2">
    <div class="row">
      <div class="col-12">
        <div class="card bg-light mb-2">
          <div class="card-header bg-generic-card-header">
            <h5>
              <%= t('translations') %>
            </h5>
          </div>
          <div class="card-body">
            <% @tag.locales.each do |l| %>
              <%= link_to l.to_s,
                          tag_path(@tag, params: { locale: l }),
                          class: 'badge badge-light' %>
              <%= @tag.notions.where(locale: l)&.first&.title %>
              <br>
            <% end %>
          </div>
        </div>
      </div>
      <div class="col-12">
        <div class="card bg-light mb-2"
             id="relatedTags">
          <div class="card-header bg-generic-card-header">
            <h5>
              <%= t('related_tags') %>
            </h5>
          </div>
          <div class="card-body"
               id="relatedTagsBody">
            <% if @related_tags.present? %>
              <% @related_tags.natural_sort_by(&:title).each do |t| %>
                <%= link_to t.short_title,
                            tag_path(t),
                            class: "badge badge-light",
                            id: 'related-' + dom_id(t),
                            data: { toggle: 'tooltip',
                                    placement: 'top',
                                    id: t.id },
                            title: t.title %>
                <br>
              <% end %>
            <% else %>
              <%= t('no_related_tags') %>
            <% end %>
            <% if @tags_in_neighbourhood.present? %>
              <h6 class="mt-2">
                <%= t('tags_in_neighbourhood') %>
              </h6>
              <% @tags_in_neighbourhood.natural_sort_by(&:title).each do |t| %>
                <%= link_to t.short_title,
                            tag_path(t),
                            class: "badge badge-light",
                            id: 'related-' + dom_id(t),
                            data: { toggle: 'tooltip',
                                    placement: 'top',
                                    id: t.id},
                            title: t.title %>
                <br>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
      <div class="col-12">
        <%= render partial: 'sections/sections',
                   locals: { sections: @tag.visible_sections(current_user) } %>
      </div>
    </div>
  </div>
  <div class="col-12 col-lg-8 col-xl-6 col-xxl-7 mb-2">
    <div class="card">
      <div class="card-header bg-generic-card-header">
        <div class="row">
          <div class="col-3">
            <h5>
              <%= t('mampf_map') %>
            </h5>
          </div>
          <div class="col-9 text-right">
            <%= link_to t('external_render'),
                        display_cyto_tag_path(@tag),
                        class: 'btn btn-sm btn-outline-secondary',
                        target: :_blank%>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div id="cy"
             data-elements="<%= @graph_elements.to_json %>"
             data-tag="<%= @tag.id %>">
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 col-lg-12 col-xl-3 col-xxl-3">
    <%= render partial: 'media/related_media',
               locals: { media: @media} %>
  </div>
</div>
