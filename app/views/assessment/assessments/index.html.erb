<%= turbo_frame_tag "assessment-assessments-frame" do %>
  <% I18n.with_locale(@lecture.locale_with_inheritance || I18n.default_locale) do %>
    <h3 class="lecture-pane-header">
      <%= @lecture.seminar? ? t('assessment.talks') : t('assessment.assignments') %>
    </h3>

    <% if @lecture.seminar? %>
      <div class="alert alert-info mb-3">
        <i class="bi bi-info-circle me-2"></i>
        <%= t('assessment.info.talks_created_in_roster') %>
      </div>
    <% else %>
      <div class="row mb-3">
        <div class="col-12 text-center">
          <%= link_to t('admin.assignment.new'),
                      new_assignment_path(params: { lecture_id: @lecture.id }),
                      class: 'btn btn-sm btn-primary',
                      id: 'newAssignmentButton',
                      data: { turbo_frame: 'assignment_form' } %>
        </div>
      </div>

      <%= turbo_frame_tag 'assignment_form' %>
    <% end %>

    <% if @assessables_with_assessment.any? %>
      <div class="list-group mb-4" id="assessment-assessments-list">
        <% @assessables_with_assessment.each do |assessable| %>
          <%= render AssessmentListItemComponent.new(assessable: assessable, lecture: @lecture) %>
        <% end %>
      </div>
    <% else %>
      <div class="list-group mb-4" id="assessment-assessments-list">
      </div>
    <% end %>

    <% if @legacy_assessables.any? %>
      <div class="lecture-pane-separator"></div>
      <h4 class="mb-2">
        <%= t('assessment.legacy_items') %>
      </h4>
      <p class="text-muted small mb-3">
        <%= t('assessment.legacy_items_subtitle') %>
      </p>
      <div data-turbo="false">
        <div class="list-group">
          <% @legacy_assessables.each do |assessable| %>
            <% if assessable.is_a?(Assignment) %>
              <%= render 'assignments/row', assignment: assessable %>
            <% else %>
              <%= render AssessmentListItemComponent.new(assessable: assessable, lecture: @lecture, legacy: true) %>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @assessables_with_assessment.empty? && @legacy_assessables.empty? %>
      <div class="text-center text-muted py-4">
        <%= @lecture.seminar? ? t('assessment.no_talks_yet') : t('assessment.no_assignments_yet') %>
      </div>
    <% end %>
  <% end %>
<% end %>
